<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JavaScript Variable Explorer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-move {
      transition: transform 0.5s ease, background-color 0.5s;
    }
    .arrow {
      transition: transform 0.5s ease;
    }
  </style>
</head>
<body class="bg-gray-50 font-sans min-h-screen text-gray-800">

  <!-- Header -->
  <header class="sticky top-0 z-50 bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg py-6 text-center">
    <h1 class="text-4xl font-bold mb-1 animate-pulse">üîç JavaScript Variable Explorer</h1>
  </header>

  <!-- Main Container -->
  <main class="max-w-5xl mx-auto py-8 px-4">
    <!-- Tab: Values & Variables -->
         <!-- Tabs -->
         <div class="flex justify-center mb-4 gap-6">
            <button data-tab="values" onclick="showTab('values')" class="tab-btn px-5 py-2 rounded bg-blue-900 text-white shadow hover:bg-blue-700 font-medium">Values & Variables</button>
            <button data-tab="mutation" onclick="showTab('mutation')" class="tab-btn px-5 py-2 rounded bg-white text-gray-800 shadow hover:bg-blue-100 font-medium">Variable Mutation</button>
        </div>
    
        <div id="tab-values" class="tab-content">
          <h2 class="text-2xl font-semibold mb-4">üß† Values & Variables</h2>
          <div class="bg-white p-6 rounded-lg shadow mb-6">
            <p class="mb-2">Enter your JavaScript code:</p>
            <textarea id="code1" class="w-full h-40 p-2 font-mono bg-gray-100 rounded" spellcheck="false">// Try editing this
    let name = "Alice";
    let age = 25;
    document.getElementById('output1').innerText = name + " is " + age + " years old";
            </textarea>
            <button onclick="runCode('code1', 'output1')" class="mt-3 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">‚ñ∂Ô∏è Run Code</button>
            <div id="output1" class="mt-4 p-4 bg-green-100 rounded transition-transform duration-500 translate-x-0 opacity-100"></div>
          </div>
        </div>
    
        <!-- Tab: Variable Mutation -->
        <div id="tab-mutation" class="tab-content hidden">
          <h2 class="text-2xl font-semibold mb-4">üîÑ Variable Mutation</h2>
          <div class="bg-white p-6 rounded-lg shadow mb-6">
            <p class="mb-2">Try changing a variable value:</p>
            <textarea id="code2" class="w-full h-40 p-2 font-mono bg-gray-100 rounded" spellcheck="false">// Try editing this
    let counter = 1;
    counter = counter + 1;
    document.getElementById('output2').innerText = "Counter is now " + counter;
            </textarea>
            <button onclick="runCode('code2', 'output2')" class="mt-3 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">‚ñ∂Ô∏è Run Code</button>
            <div id="output2" class="mt-4 p-4 bg-yellow-100 rounded transition-all duration-500 translate-x-0 opacity-100"></div>
          </div>
        </div>

    <!-- Animation Section -->
    <section class="space-y-10">
      <h2 class="text-3xl font-bold text-center text-blue-700">üîÅ Primitive vs Reference</h2>

      <!-- Flex Cards Container -->
      <div class="flex flex-col lg:flex-row lg:space-x-6 space-y-6 lg:space-y-0">

        <!-- Primitive Box -->
        <div class="flex-1 bg-white p-6 rounded-lg shadow-lg">
          <h3 class="text-xl font-semibold text-blue-600 mb-6">Primitive Copy (let b = a)</h3>
          <div class="flex items-center justify-around mb-4">
            <div id="box-a" class="w-24 h-24 bg-green-100 border-4 border-green-400 rounded flex items-center justify-center font-bold text-lg fade-move">25</div>
            <svg id="primitive-arrow" class="w-10 h-10 text-gray-500 arrow mx-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M9 5l7 7-7 7" />
            </svg>
            <div id="box-b" class="w-24 h-24 bg-green-100 border-4 border-green-400 rounded flex items-center justify-center font-bold text-lg fade-move">?</div>
          </div>
          <div class="text-center">
            <button onclick="copyPrimitive()" class="mt-2 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Copy Primitive</button>
          </div>
        </div>

        <!-- Reference Box -->
        <div class="flex-1 bg-white p-6 rounded-lg shadow-lg">
          <h3 class="text-xl font-semibold text-indigo-600 mb-6">Reference Copy (let obj2 = obj1)</h3>
          <div class="flex items-center justify-around mb-4">
            <div class="flex flex-col items-center">
              <div id="ref-a" class="w-24 h-24 bg-indigo-100 border-4 border-indigo-400 rounded flex items-center justify-center font-bold text-lg fade-move">üìç</div>
              <p class="mt-2 text-sm font-mono">obj1</p>
            </div>

            <svg id="ref-arrow" class="w-10 h-10 text-gray-500 arrow mx-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M9 5l7 7-7 7" />
            </svg>

            <div class="flex flex-col items-center">
              <div id="ref-b" class="w-24 h-24 bg-indigo-100 border-4 border-indigo-400 rounded flex items-center justify-center font-bold text-lg fade-move">üìç</div>
              <p class="mt-2 text-sm font-mono">obj2</p>
            </div>

            <svg class="w-10 h-10 text-gray-400 mx-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M9 5l7 7-7 7" />
            </svg>

            <div id="ref-object" class="w-44 h-24 bg-gray-100 border-2 border-gray-400 rounded flex items-center justify-center px-3 text-sm">
              { name: "Tom" }
            </div>
          </div>
          <div class="text-center">
            <button onclick="updateReference()" class="mt-2 px-5 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Update obj2.name = "Jerry"</button>
          </div>
        </div>
      </div>
    </section>

    <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
        <h3 class="text-xl font-semibold text-red-600 mb-4">üî• Must-Know for Senior / Tech Lead</h3>
        <p class="mb-2 text-gray-700">
          As a Senior or Tech Lead, you must deeply understand how JavaScript stores and handles values and references.
        </p>
        <ul class="list-disc list-inside space-y-2 text-gray-700">
          <li><strong>Primitive values</strong> are stored directly in the variable's memory space (stack). When assigned to another variable, the value is <strong>copied</strong>, meaning mutations do not affect the original.</li>
          <li><strong>Reference types</strong> (objects, arrays, functions) are stored in the heap, and variables store a <strong>reference (pointer)</strong> to that heap address.</li>
          <li>When assigning <code>let obj2 = obj1;</code>, both variables point to the <strong>same memory address</strong>. Mutating <code>obj2</code> will affect <code>obj1</code> too.</li>
          <li>Even with <code>const</code>, object properties can still mutate ‚Äî <strong>const only locks the binding, not the object itself</strong>.</li>
          <li><strong>Deep cloning</strong> is required to truly duplicate an object without shared memory: e.g. using <code>structuredClone()</code> or libraries like Lodash <code>_.cloneDeep</code>.</li>
        </ul>
      
        <p class="mt-4 text-blue-700">
          ‚úÖ This knowledge is foundational for writing predictable code, avoiding side-effects, debugging complex bugs, and mentoring junior developers.
        </p>
      </div>

    <!-- Ch√®n v√†o d∆∞·ªõi ph·∫ßn Must-Know -->
<div class="bg-white p-6 rounded-lg shadow-lg mt-8">
    <h3 class="text-xl font-semibold text-green-700 mb-4">üî¨ Interactive Example: const with object mutation</h3>
    <p class="mb-2 text-gray-700">Even when declared with <code>const</code>, an object‚Äôs internal properties can still be changed:</p>
  
    <pre class="bg-black text-green-300 p-4 rounded text-sm overflow-x-auto">
  const user = { name: "Alice" };
  user.name = "Bob";
  console.log(user); // Output: { name: "Bob" }
    </pre>
  
    <button onclick="runMutationExample()" class="mt-3 px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700">‚ñ∂Ô∏è Run Example</button>
    <div id="mutation-output" class="mt-4 p-4 bg-green-100 rounded"></div>
  </div>
  
  <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
    <h3 class="text-xl font-semibold text-purple-700 mb-4">üß™ Interactive Example: Deep clone vs shallow copy</h3>
    <p class="mb-2 text-gray-700">This example shows the difference between copying by reference vs using deep clone:</p>
  
    <pre class="bg-black text-purple-200 p-4 rounded text-sm overflow-x-auto">
  const original = { profile: { name: "Tom" } };
  const shallow = original;
  const deep = structuredClone(original);
  
  shallow.profile.name = "Jerry";
  
  console.log(original); // Mutated: { profile: { name: "Jerry" } }
  console.log(deep);     // Unchanged: { profile: { name: "Tom" } }
    </pre>
  
    <button onclick="runCloneExample()" class="mt-3 px-5 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">‚ñ∂Ô∏è Run Clone Example</button>
    <div id="clone-output" class="mt-4 p-4 bg-purple-100 rounded whitespace-pre-line text-sm"></div>
  </div>  

  <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
    <h3 class="text-xl font-semibold text-orange-700 mb-4">üì¶ Object.assign vs JSON.parse(JSON.stringify())</h3>
  
    <p class="text-gray-700 mb-2">
      These two methods are often used for copying objects, but they behave differently:
    </p>
  
    <ul class="list-disc list-inside space-y-1 text-gray-700 text-sm">
      <li><strong>Object.assign(target, source)</strong>: Performs a shallow copy ‚Äî nested objects still share reference.</li>
      <li><strong>JSON.parse(JSON.stringify(object))</strong>: Deep copies most structures, but loses functions, <code>undefined</code>, <code>Date</code>, and special types like <code>Map</code>, <code>Set</code>.</li>
    </ul>
  
    <pre class="bg-black text-orange-200 p-4 rounded text-sm overflow-x-auto mt-4">
  const original = { name: "Alice", meta: { age: 30 } };
  const assigned = Object.assign({}, original);
  const jsonCloned = JSON.parse(JSON.stringify(original));
  
  assigned.meta.age = 40;
  
  console.log(original.meta.age);   // ‚ùó Still 40 ‚Äî shallow copy
  console.log(jsonCloned.meta.age); // ‚úÖ 30 ‚Äî deep copy
    </pre>
  
    <button onclick="runAssignVsJSON()" class="mt-3 px-5 py-2 bg-orange-600 text-white rounded hover:bg-orange-700">‚ñ∂Ô∏è Run Comparison</button>
    <div id="assign-json-output" class="mt-4 p-4 bg-orange-100 rounded whitespace-pre-line text-sm"></div>
  </div>

  <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
    <h3 class="text-xl font-semibold text-blue-800 mb-4">üß† structuredClone vs Other Cloning Methods</h3>
  
    <p class="text-gray-700 mb-4">
      <code>structuredClone()</code> is the modern and recommended way to deep copy complex data structures. Here's how it compares:
    </p>
  
    <div class="overflow-x-auto">
      <table class="table-auto w-full text-sm text-left border border-gray-300">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2 border">Method</th>
            <th class="px-4 py-2 border">Deep?</th>
            <th class="px-4 py-2 border">Keeps functions?</th>
            <th class="px-4 py-2 border">Supports Date / RegExp / Map / Set?</th>
            <th class="px-4 py-2 border">Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="px-4 py-2 border">Object.assign()</td>
            <td class="px-4 py-2 border">‚ùå</td>
            <td class="px-4 py-2 border">‚úÖ</td>
            <td class="px-4 py-2 border">‚úÖ</td>
            <td class="px-4 py-2 border">Shallow copy only</td>
          </tr>
          <tr>
            <td class="px-4 py-2 border">JSON.parse(JSON.stringify())</td>
            <td class="px-4 py-2 border">‚úÖ</td>
            <td class="px-4 py-2 border">‚ùå</td>
            <td class="px-4 py-2 border">‚ùå</td>
            <td class="px-4 py-2 border">Loses methods, special types</td>
          </tr>
          <tr>
            <td class="px-4 py-2 border">structuredClone()</td>
            <td class="px-4 py-2 border">‚úÖ</td>
            <td class="px-4 py-2 border">‚ùå</td>
            <td class="px-4 py-2 border">‚úÖ</td>
            <td class="px-4 py-2 border">Best native option in modern browsers</td>
          </tr>
          <tr>
            <td class="px-4 py-2 border">_.cloneDeep (Lodash)</td>
            <td class="px-4 py-2 border">‚úÖ</td>
            <td class="px-4 py-2 border">‚úÖ</td>
            <td class="px-4 py-2 border">Partial</td>
            <td class="px-4 py-2 border">Third-party, handles cycles</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  
  <!-- ∆Øu / Nh∆∞·ª£c ƒëi·ªÉm khi clone object ƒë·∫∑c bi·ªát -->
  <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
    <h3 class="text-xl font-semibold text-red-700 mb-4">‚ö†Ô∏è Special Considerations When Cloning</h3>
    <ul class="list-disc list-inside text-gray-700 text-sm space-y-2">
      <li><strong>Date</strong>: <code>JSON</code> turns it into a string. Use <code>structuredClone</code> or <code>new Date(obj.date)</code>.</li>
      <li><strong>RegExp</strong>: Lost via JSON; use <code>new RegExp(obj)</code> or <code>structuredClone</code>.</li>
      <li><strong>Map / Set</strong>: Fully preserved with <code>structuredClone</code>, but lost with JSON methods.</li>
      <li><strong>Functions</strong>: Removed in both <code>structuredClone</code> and <code>JSON</code>. Use manual reconstruction or shallow copy.</li>
      <li><strong>DOM elements</strong>: Cannot be cloned by any of these methods.</li>
    </ul>
  </div>

  <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
    <h3 class="text-xl font-semibold text-gray-800 mb-4">üìö Shallow Copy vs Deep Copy ‚Äì Core Concepts</h3>
  
    <p class="text-gray-700 mb-4">
      Understanding the difference between <strong>shallow copy</strong> and <strong>deep copy</strong> is critical in JavaScript, especially when working with objects, arrays, and references.
    </p>
  
    <div class="grid md:grid-cols-2 gap-6">
      <!-- Shallow Copy -->
      <div class="bg-gray-50 border border-gray-200 p-4 rounded">
        <h4 class="font-semibold text-blue-600 mb-2">üîπ Shallow Copy</h4>
        <ul class="list-disc list-inside text-gray-700 text-sm space-y-1">
          <li>Copies only the <strong>top-level properties</strong>.</li>
          <li><strong>Nested objects or arrays</strong> are still <em>shared references</em>.</li>
          <li>Mutating nested data will affect the original.</li>
        </ul>
        <p class="mt-2 text-sm text-gray-600 italic">Used in: <code>Object.assign()</code>, <code>spread operator {...}</code></p>
      </div>
  
      <!-- Deep Copy -->
      <div class="bg-gray-50 border border-gray-200 p-4 rounded">
        <h4 class="font-semibold text-green-600 mb-2">üî∏ Deep Copy</h4>
        <ul class="list-disc list-inside text-gray-700 text-sm space-y-1">
          <li>Recursively copies <strong>all levels</strong> of the object.</li>
          <li>No shared references between original and copy.</li>
          <li>Changing deep properties does <strong>not</strong> affect the original.</li>
        </ul>
        <p class="mt-2 text-sm text-gray-600 italic">Used in: <code>structuredClone()</code>, <code>JSON.parse(JSON.stringify())</code>, <code>_.cloneDeep</code></p>
      </div>
    </div>
  
    <p class="mt-4 text-gray-700 text-sm">
      üß† <strong>Tech Lead Tip:</strong> Always assess whether your copy needs to be deep or shallow ‚Äî many bugs come from unintended shared references!
    </p>
  </div>

  <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
    <h3 class="text-xl font-semibold text-cyan-700 mb-4">üß© Visual Diagram: Shallow vs Deep Copy</h3>
    <p class="text-gray-700 mb-4">
      Hover or click the buttons below to see how references behave in shallow vs deep copies:
    </p>
  
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Shallow Copy Diagram -->
      <div class="flex-1 border rounded p-4 bg-gray-50 relative">
        <h4 class="font-semibold text-blue-600 mb-2">üîπ Shallow Copy</h4>
        <div class="flex items-center justify-around">
          <div class="flex flex-col items-center">
            <div class="w-24 h-24 bg-blue-100 border-4 border-blue-400 rounded flex items-center justify-center font-bold">original</div>
          </div>
          <svg class="w-10 h-10 text-gray-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M9 5l7 7-7 7" />
          </svg>
          <div class="flex flex-col items-center">
            <div class="w-24 h-24 bg-blue-100 border-4 border-blue-400 rounded flex items-center justify-center font-bold">copy</div>
          </div>
        </div>
        <div class="flex justify-center mt-4">
          <div class="w-40 h-16 bg-white border border-gray-300 rounded text-center text-xs pt-1">{ profile: ‚û°Ô∏è <span class="text-red-600">sharedRef</span> }</div>
        </div>
      </div>
  
      <!-- Deep Copy Diagram -->
      <div class="flex-1 border rounded p-4 bg-gray-50 relative">
        <h4 class="font-semibold text-green-600 mb-2">üî∏ Deep Copy</h4>
        <div class="flex items-center justify-around">
          <div class="flex flex-col items-center">
            <div class="w-24 h-24 bg-green-100 border-4 border-green-400 rounded flex items-center justify-center font-bold">original</div>
          </div>
          <svg class="w-10 h-10 text-gray-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M9 5l7 7-7 7" />
          </svg>
          <div class="flex flex-col items-center">
            <div class="w-24 h-24 bg-green-100 border-4 border-green-400 rounded flex items-center justify-center font-bold">copy</div>
          </div>
        </div>
        <div class="flex justify-center mt-4">
          <div class="w-40 h-16 bg-white border border-gray-300 rounded text-center text-xs pt-1">{ profile: <span class="text-green-600">independent</span> }</div>
        </div>
      </div>
    </div>
  
    <p class="mt-4 text-sm text-gray-600 italic text-center">In shallow copy, nested references (like <code>profile</code>) are shared. In deep copy, they are duplicated.</p>
  </div>
  </main>

  <script>
    function showTab(tab) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
      document.getElementById('tab-' + tab).classList.remove('hidden');
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('bg-blue-900', 'text-white');
        btn.classList.add('bg-white', 'text-gray-800');
      });
      const activeBtn = document.querySelector(`.tab-btn[data-tab="${tab}"]`);
      activeBtn.classList.add('bg-blue-900', 'text-white');
      activeBtn.classList.remove('bg-white', 'text-gray-800');
    }

    function runCode(inputId, outputId) {
      const code = document.getElementById(inputId).value;
      const outputEl = document.getElementById(outputId);
      try {
        outputEl.classList.remove("opacity-0", "translate-x-10");
        outputEl.innerText = "";
        setTimeout(() => {
          eval(code);
          outputEl.classList.add("opacity-100", "translate-x-0");
        }, 100);
      } catch (e) {
        outputEl.innerText = "‚ùå Error: " + e.message;
        outputEl.classList.add("bg-red-100");
      }
    }

    function copyPrimitive() {
      const boxA = document.getElementById("box-a");
      const boxB = document.getElementById("box-b");
      const arrow = document.getElementById("primitive-arrow");
      arrow.classList.add("translate-x-2");
      setTimeout(() => {
        boxB.textContent = boxA.textContent;
        boxB.classList.add("bg-green-200");
        arrow.classList.remove("translate-x-2");
      }, 500);
    }

    function updateReference() {
      const objectBox = document.getElementById("ref-object");
      const arrow = document.getElementById("ref-arrow");
      arrow.classList.add("-rotate-12");
      setTimeout(() => {
        objectBox.textContent = '{ name: "Jerry" }';
        objectBox.classList.add("bg-yellow-100");
        arrow.classList.remove("-rotate-12");
      }, 500);
    }

    function runMutationExample() {
    const user = { name: "Alice" };
    user.name = "Bob";
    document.getElementById("mutation-output").innerText = JSON.stringify(user, null, 2);
  }

  function runCloneExample() {
    const original = { profile: { name: "Tom" } };
    const shallow = original;
    const deep = structuredClone(original);

    shallow.profile.name = "Jerry";

    const result = `original: ${JSON.stringify(original, null, 2)}\n\ndeep: ${JSON.stringify(deep, null, 2)}`;
    document.getElementById("clone-output").innerText = result;
  }

  function runAssignVsJSON() {
    const original = { name: "Alice", meta: { age: 30 } };
    const assigned = Object.assign({}, original);
    const jsonCloned = JSON.parse(JSON.stringify(original));

    assigned.meta.age = 40;

    const result = `original.meta.age: ${original.meta.age}  // still affected\njsonCloned.meta.age: ${jsonCloned.meta.age}  // remains 30`;
    document.getElementById("assign-json-output").innerText = result;
  }
  </script>

</body>
</html>
